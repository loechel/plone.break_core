# -*- coding: utf-8 -*-

import ConfigParser
import logging
import os
import os.path

import ipdb

#: Logger instance globaly used in this package
logger = logging.getLogger("plone.vulnerabilitychecks.core")


class VulnerabilityError(Exception):
    """VulnerabilityError is an Exception that indicates
    that an insecure Plone version is in use.
    """

    #def __str__(self):
    #    return " ".join(map(str, self.args))


class VulnerabilityConfig(object):

    def __init__(self):

        config = ConfigParser.ConfigParser()

        ipdb.set_trace()

        conf_file = os.path.join(
            os.path.abspath(os.curdir),
            'vulnerabilitychecks.ini')
        config.readfp(open(conf_file, 'r'))

        self.VULNERABILITY_DB_URL = config.get(
            'vulnerabilitychecks',
            'source-url',
            'https://plone.org/')

config = VulnerabilityConfig()

#: URL of the vulnerability data base
VULNERABILITY_DB_URL = config.VULNERABILITY_DB_URL
#vulnerability_db_url = "http://plone.org/"

#: URL of Python Package Index
#: used to recive JSON data from package index
PYPI_URL = "https://pypi.python.org/pypi/"
